  <!DOCTYPE html>
  <html lang="en">
    <head>
      <meta charset="UTF-8" />
      <meta name="viewport" content="width=device-width, initial-scale=1.0" />
      <title>Royal Panda</title>
      <link rel="shortcut icon" href="/images/favicon.ico" type="image/x-icon" />
      <script src="https://cdn.tailwindcss.com"></script>
    </head>

    <body class="bg-gray-50 text-gray-900">
      <!-- Navbar Partial -->
      <%- include('partials/nav') %>

      <!-- Main Content -->
      <main class="  md:block max-w-9xl mx-auto px-6 py-10 space-y-20">
        




        <section>
          <div class="flex items-center justify-between mb-6">
            <h2 class="text-3xl font-semibold text-red-700 mb-6 border-b-2 border-red-600 pb-2">Pizza </h2>
            <form action="/host/add-dish" method="get">
                <button type="submit" class="bg-red-600 md:ml-77 text-white px-3 py-1.5 text-sm rounded-md  relative  font-semibold hover:bg-red-700 transition">Add + Item
                </button>
            </form>
          </div>
          <div class="flex gap-6 overflow-x-auto pb-4 snap-x snap-mandatory scrollbar-thin scrollbar-thumb-red-600">
            


            <% dishes.forEach(p => { %>

             
              <div class="flex-none snap-center w-[300px] h-[460px] bg-white rounded-xl 
                          border-t-4 border-red-600 
                          shadow-[0_4px_10px_rgba(0,0,0,0.2),0_0_0_4px_rgba(255,255,255,0.1)] 
                          hover:shadow-[0_6px_15px_rgba(0,0,0,0.3),0_0_0_4px_rgba(255,255,255,0.15)] 
                          flex flex-col transition-shadow duration-300">
                <div class="h-48">
                  <img src="<%= p.photo %>" class="w-full h-full object-cover rounded-t-xl" />
                </div>
                <div class="p-4 flex-grow flex flex-col justify-between">
                  <div>
                    <h3 class="text-xl font-bold mb-1 text-red-600"><%= p.name %></h3>
                    <p class="text-sm text-gray-600 mb-3"><%= p.desc %></p>
                    <span class="text-2xl font-bold text-red-600"><%= p.price %></span>
                  </div>
                  <div class="space-y-2">
                    <button class="w-full bg-gray-100 text-red-600 border border-gray-300 py-1 rounded-lg text-sm font-semibold hover:bg-gray-200">Customize ></button>
                    <button class="w-full bg-red-600 text-white py-2 rounded-lg font-semibold hover:bg-red-700">Add +</button>
                  </div>
                </div>
              </div>
            <% }) %>
          </div>
        </section>



        <!-- üçï Pan Pizzas -->
        <section>
          <div class="flex items-center justify-between mb-6">
            <h2 class="text-3xl font-semibold text-red-700 mb-6 border-b-2 border-red-600 pb-2">Pizza </h2>
            <form action="/host/add-dish" method="get">
                <button type="submit" class="bg-red-600 md:ml-77 text-white px-3 py-1.5 text-sm rounded-md  relative  font-semibold hover:bg-red-700 transition">Add + Item
                </button>
            </form>
          </div>
          <div class="flex gap-6 overflow-x-auto pb-4 snap-x snap-mandatory scrollbar-thin scrollbar-thumb-red-600">
            <% const pizzas = [
    {name:"Veg. Single Pizza", desc:"(Onion, Capsicum, Corn or Tomato)", price:"‚Çπ70", img:"/images/singleveg.png"},
    {name:"Veg Double Pan Pizza", desc:"(Choose any two toppings)", price:"‚Çπ90", img:"/images/doubleveg.png"},
    {name:"Tri Colour Pizza", desc:"(Onion, Capsicum and Corn)", price:"‚Çπ100", img:"/images/tricolor.png"},
    {name:"Paneer Pizza", desc:"(Onion and Paneer)", price:"‚Çπ110", img:"/images/paneer.png"},
    {name:"Veg. Loaded Pizza", desc:"(Onion, Capsicum, Corn, Tomato & Jalapeno)", price:"‚Çπ130", img:"/images/vegloaded.png"},
    {name:"Margherita Pizza", desc:"(Mozzarella and Cheddar Cheese)", price:"‚Çπ130", img:"/images/MargheritaPizza.png"},
    {name:"Double Cheese Pizza", desc:"(Extra Mozzarella & Cheddar Cheese)", price:"‚Çπ160", img:"/images/DoubleCheese.png"},
    {name:"Spicy Paneer Pizza", desc:"(Paneer, Onion, Jalapeno & Red Pepper)", price:"‚Çπ170", img:"/images/SpicyPaneerPizza.png"},
    {name:"Farm House Pizza", desc:"(Onion, Capsicum, Corn & Tomato)", price:"‚Çπ170", img:"/images/FarmHousePizza.png"},
    {name:"Cheese Burst Pizza", desc:"(Extra Cheese Loaded Crust)", price:"‚Çπ170", img:"/images/CheeseBurstPizza.png"},
    {name:"Extra Cheese Pizza", desc:"(Loaded with extra cheese)", price:"‚Çπ170", img:"/images/ExtraCheesePizza.png"},
    {name:"Pasta Pizza", desc:"(Pasta topping over pizza)", price:"‚Çπ160", img:"/images/PastaPizza.png"},
    {name:"Extra Veganza Pizza", desc:"(Onion, Corn, Capsicum, Jalapeno, Red Paprika, Black Olives)", price:"‚Çπ190", img:"/images/ExtraVeganzaPizza.png"},
    {name:"Punjabi Tadka Pizza", desc:"(Chilli Paneer, Onion, Capsicum, Red Paprika and Jalapeno)", price:"‚Çπ200", img:"/images/PunjabiTadkaPizza.png"}
  ]; %>


            <% pizzas.forEach(p => { %>
              <div class="flex-none snap-center w-[300px] h-[460px] bg-white rounded-xl 
                          border-t-4 border-red-600 
                          shadow-[0_4px_10px_rgba(0,0,0,0.2),0_0_0_4px_rgba(255,255,255,0.1)] 
                          hover:shadow-[0_6px_15px_rgba(0,0,0,0.3),0_0_0_4px_rgba(255,255,255,0.15)] 
                          flex flex-col transition-shadow duration-300">
                <div class="h-48">
                  <img src="<%= p.img %>" class="w-full h-full object-cover rounded-t-xl" />
                </div>
                <div class="p-4 flex-grow flex flex-col justify-between">
                  <div>
                    <h3 class="text-xl font-bold mb-1 text-red-600"><%= p.name %></h3>
                    <p class="text-sm text-gray-600 mb-3"><%= p.desc %></p>
                    <span class="text-2xl font-bold text-red-600"><%= p.price %></span>
                  </div>
                  <div class="space-y-2">
                    <button class="w-full bg-gray-100 text-red-600 border border-gray-300 py-1 rounded-lg text-sm font-semibold hover:bg-gray-200">Customize ></button>
                    <button class="w-full bg-red-600 text-white py-2 rounded-lg font-semibold hover:bg-red-700">Add +</button>
                  </div>
                </div>
              </div>
            <% }) %>
          </div>
        </section>

        <!---garlic bread-->

        <section>
          <div class="flex items-center justify-between mb-6">
            <h2 class="text-3xl font-semibold text-red-700 mb-6 border-b-2 border-red-600 pb-2">Garlic Bread </h2>
          <button class="bg-red-600 md:ml-77 text-white px-3 py-1.5 text-sm rounded-md  relative  font-semibold hover:bg-red-700 transition">Add + Item
</button>
          </div>
          <div class="flex gap-6 overflow-x-auto pb-4 snap-x snap-mandatory scrollbar-thin scrollbar-thumb-red-600">
            <% const garlicBreads = [
    {name:"Plain Garlic Bread Stick", desc:"Freshly baked garlic bread stick", price:"‚Çπ70", img:"/images/PlainGarlicBread.png"},
    {name:"Cheesy Garlic Bread Stick", desc:"Garlic bread topped with melted cheese", price:"‚Çπ90", img:"/images/CheesyGarlicBread.png"},
    {name:"Four Piece Garlic Bread Stick", desc:"Topping with cheese and vegetables", price:"‚Çπ70", img:"/images/FourPieceGarlicBread.png"},
    {name:"Stuffed Garlic Bread Stick", desc:"Cheesy corn and jalapeno with cheese", price:"‚Çπ110", img:"/images/StuffedGarlicBread.png"},
    {name:"Paneer Garlic Bread", desc:"Paneer, onion and cheese stuffed garlic bread", price:"‚Çπ120", img:"/images/PaneerGarlicBread.png"}
  ]; %>



            <% garlicBreads.forEach(g => { %>
              <div class="flex-none snap-center w-[300px] h-[460px] bg-white rounded-xl 
                          border-t-4 border-red-600 
                          shadow-[0_4px_10px_rgba(0,0,0,0.2),0_0_0_4px_rgba(255,255,255,0.1)] 
                          hover:shadow-[0_6px_15px_rgba(0,0,0,0.3),0_0_0_4px_rgba(255,255,255,0.15)] 
                          flex flex-col transition-shadow duration-300">
                <div class="h-48">
                  <img src="<%= g.img %>" class="w-full h-full object-cover rounded-t-xl" />
                </div>
                <div class="p-4 flex-grow flex flex-col justify-between">
                  <div>
                    <h3 class="text-xl font-bold mb-1 text-red-600"><%= g.name %></h3>
                    <p class="text-sm text-gray-600 mb-3"><%= g.desc %></p>
                    <span class="text-2xl font-bold text-red-600"><%= g.price %></span>
                  </div>
                  <div class="space-y-2">
                    <button class="w-full bg-red-600 text-white py-2 rounded-lg font-semibold hover:bg-red-700">Add +</button>
                  </div>
                </div>
              </div>
            <% }) %>
          </div>
        </section>


        <!-- üçù Pasta -->
        <section>
         <div class="flex items-center justify-between mb-6">
            <h2 class="text-3xl font-semibold text-red-700 mb-6 border-b-2 border-red-600 pb-2">Pasta </h2>
          <button class="bg-red-600 md:ml-77 text-white px-3 py-1.5 text-sm rounded-md  relative  font-semibold hover:bg-red-700 transition">Add + Item
</button>
          </div>
          <div class="flex gap-6 overflow-x-auto pb-4 snap-x snap-mandatory scrollbar-thin scrollbar-thumb-red-600">
            <% const pastas = [
              {name:"White Sauce Pasta", desc:"(Creamy base, cheesy delight)", price:"‚Çπ90 Half / ‚Çπ140 Full", img:"/images/whitepasta.png"},
              {name:"Red Sauce Pasta", desc:"(Tangy tomato sauce & herbs)", price:"‚Çπ90 Half / ‚Çπ140 Full", img:"/images/redpasta.png"},
              {name:"Aloo Stuffed Kulcha", desc:"Soft kulcha filled with spicy mashed potato", price:"‚Çπ60", img:"/images/alookulcha.png"},
              {name:"Paneer Stuffed Kulcha", desc:"Stuffed with flavorful paneer filling", price:"‚Çπ70", img:"/images/paneerkulcha.png"},
            ]; %>

            <% pastas.forEach(p => { %>
              <div class="flex-none snap-center w-[300px] h-[460px] bg-white rounded-xl 
                          border-t-4 border-red-600 
                          shadow-[0_4px_10px_rgba(0,0,0,0.2),0_0_0_4px_rgba(255,255,255,0.1)] 
                          hover:shadow-[0_6px_15px_rgba(0,0,0,0.3),0_0_0_4px_rgba(255,255,255,0.15)] 
                          flex flex-col transition-shadow duration-300">
                <div class="h-48">
                  <img src="<%= p.img %>" class="w-full h-full object-cover rounded-t-xl" />
                </div>
                <div class="p-4 flex-grow flex flex-col justify-between">
                  <div>
                    <h3 class="text-xl font-bold mb-1 text-red-600"><%= p.name %></h3>
                    <p class="text-sm text-gray-600 mb-3"><%= p.desc %></p>
                    <span class="text-2xl font-bold text-red-600"><%= p.price %></span>
                  </div>
                  <button class="w-full bg-red-600 text-white py-2 rounded-lg font-semibold hover:bg-red-700">Add +</button>
                </div>
              </div>
            <% }) %>
          </div>
        </section>

        <!-- üçî Burgers -->
        <section>
          <div class="flex items-center justify-between mb-6">
            <h2 class="text-3xl font-semibold text-red-700 mb-6 border-b-2 border-red-600 pb-2">Burgers</h2>
          <button class="bg-red-600 md:ml-77 text-white px-3 py-1.5 text-sm rounded-md  relative  font-semibold hover:bg-red-700 transition">Add + Item
</button>
          </div>

          <div class="flex gap-6 overflow-x-auto pb-4 snap-x snap-mandatory scrollbar-thin scrollbar-thumb-red-600">
            <% const burgers = [
    {name:"Classic Crispy Veg.Burger", desc:"Crispy veg patty with cheese and sauce", price:"‚Çπ40", img:"/images/vegBurger.png"},
    {name:"Mint Burger", desc:"Refreshing mint-flavored patty with special sauce", price:"‚Çπ45", img:"/images/mintBurger.png"},
    {name:"Peri-Peri Burger", desc:"Spicy peri-peri patty with fresh veggies", price:"‚Çπ50", img:"/images/periPeriBurger.png"}, 
    {name:"Delight Burger", desc:"A delightful mix of flavors", price:"‚Çπ50", img:"/images/delightBurger.png"}, 
    {name:"Mexican Burger", desc:"Tangy Mexican flavors with salsa", price:"‚Çπ60", img:"/images/mexicanBurger.png"}, 
    {name:"Pizza Burger", desc:"Burger with a pizza twist", price:"‚Çπ60", img:"/images/pizzaBurger.png"}, 
    {name:"Paneer Burger", desc:"Grilled paneer patty", price:"‚Çπ60", img:"/images/paneerBurger.png"}, 
    {name:"Panda's Burger", desc:"Special burger from Panda's kitchen", price:"‚Çπ70", img:"/images/Burger.png"}, 
    ]; %>

            <% burgers.forEach(b => { %>
              <div class="flex-none snap-center w-[300px] h-[460px] bg-white rounded-xl 
                          border-t-4 border-red-600 
                          shadow-[0_4px_10px_rgba(0,0,0,0.2),0_0_0_4px_rgba(255,255,255,0.1)] 
                          hover:shadow-[0_6px_15px_rgba(0,0,0,0.3),0_0_0_4px_rgba(255,255,255,0.15)] 
                          flex flex-col transition-shadow duration-300">
                <div class="h-48">
                  <img src="<%= b.img %>" class="w-full h-full object-cover rounded-t-xl" />
                </div>
                <div class="p-4 flex-grow flex flex-col justify-between">
                  <div>
                    <h3 class="text-xl font-bold mb-1 text-red-600"><%= b.name %></h3>
                    <p class="text-sm text-gray-600 mb-3"><%= b.desc %></p>
                    <span class="text-2xl font-bold text-red-600"><%= b.price %></span>
                  </div>
                  <button class="w-full bg-red-600 text-white py-2 rounded-lg font-semibold hover:bg-red-700">Add +</button>
                </div>
              </div>
            <% }) %>
          </div>
        </section>

        <!-- üçü Fries--- -->

      <section>
    <div class="flex items-center justify-between mb-6">
            <h2 class="text-3xl font-semibold text-red-700 mb-6 border-b-2 border-red-600 pb-2">Fries </h2>
          <button class="bg-red-600 md:ml-77 text-white px-3 py-1.5 text-sm rounded-md  relative  font-semibold hover:bg-red-700 transition">Add + Item
</button>
          </div>

    <div class="flex gap-6 overflow-x-auto pb-4 snap-x snap-mandatory scrollbar-thin scrollbar-thumb-red-600">
      <% const fries = [
        {name:"Salty French Fries", half:"‚Çπ60", full:"‚Çπ100", img:"/images/SaltyFries.png"},
        {name:"Peri Peri French Fries", half:"‚Çπ70", full:"‚Çπ110", img:"/images/PeriPeriFries.png"},
        {name:"Cheesy French Fries", half:"‚Çπ90", full:"‚Çπ130", img:"/images/CheesyFries.png"},
        {name:"Cheesy Italian French Fries", half:"‚Çπ95", full:"‚Çπ130", img:"/images/CheesyItalianFries.png"}
      ]; %>

      <% fries.forEach(f => { %>
        <div class="flex-none snap-center w-[300px] h-[460px] bg-white rounded-xl 
                    border-t-4 border-red-600 
                    shadow-[0_4px_10px_rgba(0,0,0,0.2),0_0_0_4px_rgba(255,255,255,0.1)] 
                    hover:shadow-[0_6px_15px_rgba(0,0,0,0.3),0_0_0_4px_rgba(255,255,255,0.15)] 
                    flex flex-col transition-shadow duration-300">
          <div class="h-48">
            <img src="<%= f.img %>" class="w-full h-full object-cover rounded-t-xl" />
          </div>
          <div class="p-4 flex-grow flex flex-col justify-between">
            <div>
              <h3 class="text-xl font-bold mb-1 text-red-600"><%= f.name %></h3>
              <p class="text-sm text-gray-600 mb-3"><%= f.desc %></p>
            </div>

            <!-- Buttons for Half & Full -->
            <div class="flex justify-between flex-col gap-3">
              <button class="w-full bg-red-600 text-white py-2 rounded-lg font-semibold hover:bg-red-700">
                Half <span class="block text-sm font-normal"><%= f.half %></span>
              </button>
              <button class="w-full bg-red-600 text-white py-2 rounded-lg font-semibold hover:bg-red-700">
                Full <span class="block text-sm font-normal"><%= f.full %></span>
              </button>
            </div>
          </div>
        </div>
      <% }) %>
    </div>
  </section>

        <!-------sandwhich-------->

          <section>
          <div class="flex items-center justify-between mb-6">
            <h2 class="text-3xl font-semibold text-red-700 mb-6 border-b-2 border-red-600 pb-2">sandwhich </h2>
          <button class="bg-red-600 md:ml-77 text-white px-3 py-1.5 text-sm rounded-md  relative  font-semibold hover:bg-red-700 transition">Add + Item
</button>
          </div>

          <div class="flex gap-6 overflow-x-auto pb-4 snap-x snap-mandatory scrollbar-thin scrollbar-thumb-red-600">
            <% const sandwiches = [
                {name:"Exotic Veggie Grilled Sandwich", price:"‚Çπ70", img:"/images/ExoticVeggieSandwich.png"},
                {name:"Tandoori Paneer Grilled Sandwich", price:"‚Çπ90", img:"/images/TandooriPaneerSandwich.png"},
                {name:"Cheesy Corn Grilled Sandwich", price:"‚Çπ90", img:"/images/CheesyCornSandwich.png"},
                {name:"Pizza Grilled Sandwich", price:"‚Çπ100", img:"/images/PizzaGrilledSandwich.png"}
              ]; %>

            <% sandwiches.forEach(s => { %>
              <div class="flex-none snap-center w-[300px] h-[460px] bg-white rounded-xl 
                          border-t-4 border-red-600 
                          shadow-[0_4px_10px_rgba(0,0,0,0.2),0_0_0_4px_rgba(255,255,255,0.1)] 
                          hover:shadow-[0_6px_15px_rgba(0,0,0,0.3),0_0_0_4px_rgba(255,255,255,0.15)] 
                          flex flex-col transition-shadow duration-300">
                <div class="h-48">
                  <img src="<%= s.img %>" class="w-full h-full object-cover rounded-t-xl" />
                </div>
                <div class="p-4 flex-grow flex flex-col justify-between">
                  <div>
                    <h3 class="text-xl font-bold mb-1 text-red-600"><%= s.name %></h3>
                    <p class="text-sm text-gray-600 mb-3"><%= s.desc %></p>
                    <span class="text-2xl font-bold text-red-600"><%= s.price %></span>
                  </div>
                  <button class="w-full bg-red-600 text-white py-2 rounded-lg font-semibold hover:bg-red-700">Add +</button>
                </div>
              </div>
            <% }) %>
          </div>
        </section>

        <!-------wraps-------->

         <div class="flex items-center justify-between mb-6">
            <h2 class="text-3xl font-semibold text-red-700 mb-6 border-b-2 border-red-600 pb-2">wraps </h2>
          <button class="bg-red-600 md:ml-77 text-white px-3 py-1.5 text-sm rounded-md  relative  font-semibold hover:bg-red-700 transition">Add + Item
</button>
          </div>

          <div class="flex gap-6 overflow-x-auto pb-4 snap-x snap-mandatory scrollbar-thin scrollbar-thumb-red-600">
            <% const wraps = [
            {name:"Aloo Wraps", price:"‚Çπ50", img:"/images/AlooWraps.png"},
            {name:"Paneer Wraps", price:"‚Çπ70", img:"/images/PaneerWraps.png"},
            {name:"Pizza Wraps", price:"‚Çπ70", img:"/images/PizzaWraps.png"},
            {name:"Supreme Veggie Wraps", price:"‚Çπ80", img:"/images/SupremeVeggieWraps.png"}
            ]; %>
            <% wraps.forEach(w => { %>
              <div class="flex-none snap-center w-[300px] h-[460px] bg-white rounded-xl 
                        border-t-4 border-red-600 
                          shadow-[0_4px_10px_rgba(0,0,0,0.2),0_0_0_4px_rgba(255,255,255,0.1)] 
                          hover:shadow-[0_6px_15px_rgba(0,0,0,0.3),0_0_0_4px_rgba(255,255,255,0.15)] 
                          flex flex-col transition-shadow duration-300">
                <div class="h-48">
                  <img src="<%= w.img %>" class="w-full h-full object-cover rounded-t-xl" />
                </div>
                <div class="p-4 flex-grow flex flex-col justify-between">
                  <div>
                    <h3 class="text-xl font-bold mb-1 text-red-600"><%= w.name %></h3>
                    <p class="text-sm text-gray-600 mb-3"><%= w.desc %></p>
                    <span class="text-2xl font-bold text-red-600"><%= w.price %></span>
                  </div>
                  <button class="w-full bg-red-600 text-white py-2 rounded-lg font-semibold hover:bg-red-700">Add +</button>
                </div>
              </div>
            <% }) %>
          </div>
        </section>

      <!----shakes  ------->
        <section>
   
          <div class="flex items-center justify-between mb-6">
            <h2 class="text-3xl font-semibold text-red-700 mb-6 border-b-2 border-red-600 pb-2">shakes </h2>
          <button class="bg-red-600 md:ml-77 text-white px-3 py-1.5 text-sm rounded-md  relative  font-semibold hover:bg-red-700 transition">Add + Item
</button>
          </div>

    <div class="flex gap-6 overflow-x-auto pb-4 snap-x snap-mandatory scrollbar-thin scrollbar-thumb-red-600">
      <% const shakes = [
        {name:"Strawberry Shake", regular:"‚Çπ70", large:"‚Çπ100", img:"/images/StrawberryShake.png"},
        {name:"Black Current Shake", regular:"‚Çπ70", large:"‚Çπ100", img:"/images/BlackCurrentShake.png"},
        {name:"Alphonso Mango Shake", regular:"‚Çπ70", large:"‚Çπ100", img:"/images/MangoShake.png"},
        {name:"Chocolate Shake", regular:"‚Çπ70", large:"‚Çπ100", img:"/images/shake.jpg"},
        {name:"Butter Scotch Shake", regular:"‚Çπ70", large:"‚Çπ100", img:"/images/ButterscotchShake.png"},
        {name:"Crunchy Choco Shake", regular:"‚Çπ70", large:"‚Çπ100", img:"/images/CrunchyChocoShake.png"},
        {name:"Blueberry Shake", regular:"‚Çπ80", large:"‚Çπ110", img:"/images/BlueberryShake.png"},
        {name:"Bubble Gum Shake", regular:"‚Çπ80", large:"‚Çπ110", img:"/images/BubbleGumShake.png"},
        {name:"Kit-Kat Shake", regular:"‚Çπ80", large:"‚Çπ110", img:"/images/KitKatShake.png"},
        {name:"Choco-Oreo Shake", regular:"‚Çπ90", large:"‚Çπ120", img:"/images/ChocoOreoShake.png"},
        {name:"Strawberry Oreo Shake", regular:"‚Çπ90", large:"‚Çπ120", img:"/images/StrawberryOreoShake.png"},
        {name:"Mint Oreo Shake", regular:"‚Çπ90", large:"‚Çπ120", img:"/images/MintOreoShake.png"},
        {name:"Choco Hazelnut Shake", regular:"‚Çπ90", large:"‚Çπ120", img:"/images/ChocoHazelnutShake.png"},
        {name:"Brownie Shake", regular:"‚Çπ90", large:"‚Çπ120", img:"/images/BrownieShake.png"}         
      ]; %>

      <% shakes.forEach(s => { %>
        <div class="flex-none snap-center w-[300px] h-[460px] bg-white rounded-xl 
                    border-t-4 border-red-600 
                    shadow-[0_4px_10px_rgba(0,0,0,0.2),0_0_0_4px_rgba(255,255,255,0.1)] 
                    hover:shadow-[0_6px_15px_rgba(0,0,0,0.3),0_0_0_4px_rgba(255,255,255,0.15)] 
                    flex flex-col transition-shadow duration-300">
          <div class="h-48">
            <img src="<%= s.img %>" class="w-full h-full object-cover rounded-t-xl" />
          </div>
          <div class="p-4 flex-grow flex flex-col justify-between">
            <div>
              <h3 class="text-xl font-bold mb-1 text-red-600"><%= s.name %></h3>
              <p class="text-sm text-gray-600 mb-3"><%= s.desc %></p>
            </div>

            <!-- Buttons for Regular & Large -->
            <div class="flex justify-between  flex-col gap-3">
              <button class="w-full  bg-red-600 text-white py-2 rounded-lg font-semibold hover:bg-red-700">
                Regular 
                <span class="block text-sm font-normal"><%= s.regular %></span>
              </button>
              <button class="w-full  bg-red-600 text-white py-2 rounded-lg font-semibold hover:bg-red-700">
                Large 
                <span class="block text-sm font-normal"><%= s.large %></span>
              </button>
            </div>
          </div>
        </div>
      <% }) %>
    </div>
  </section>


      <!-- ‚òï Coffee Mania -->
        <section>
          ection>
          <div class="flex items-center justify-between mb-6">
            <h2 class="text-3xl font-semibold text-red-700 mb-6 border-b-2 border-red-600 pb-2">Coffee </h2>
          <button class="bg-red-600 md:ml-77 text-white px-3 py-1.5 text-sm rounded-md  relative  font-semibold hover:bg-red-700 transition">Add + Item
</button>
          </div>

          <div class="flex gap-6 overflow-x-auto pb-4 snap-x snap-mandatory scrollbar-thin scrollbar-thumb-red-600">
            <% const coffees = [
              {name:"Cold Coffee", desc:"Chilled and creamy classic", price:"‚Çπ70", img:"/images/coldcoffee.png"},
              {name:"Iced Mocha", desc:"Coffee + Chocolate combo", price:"‚Çπ80", img:"/images/mocha.png"},
              {name:"Cappuccino", desc:"Foamy perfection", price:"‚Çπ70", img:"/images/cappuccino.png"},
              {name:"Brownie Hot Chocolate", desc:"Served with brownie and hot chocolate sauce", price:"‚Çπ90", img:"/images/browniechoco.png"}
            ]; %>

            <% coffees.forEach(c => { %>
              <div class="flex-none snap-center w-[300px] h-[460px] bg-white rounded-xl 
                          border-t-4 border-red-600 
                          shadow-[0_4px_10px_rgba(0,0,0,0.2),0_0_0_4px_rgba(255,255,255,0.1)] 
                          hover:shadow-[0_6px_15px_rgba(0,0,0,0.3),0_0_0_4px_rgba(255,255,255,0.15)] 
                          flex flex-col transition-shadow duration-300">
                <div class="h-48">
                  <img src="<%= c.img %>" class="w-full h-full object-cover rounded-t-xl" />
                </div>
                <div class="p-4 flex-grow flex flex-col justify-between">
                  <div>
                    <h3 class="text-xl font-bold mb-1 text-red-600"><%= c.name %></h3>
                    <p class="text-sm text-gray-600 mb-3"><%= c.desc %></p>
                    <span class="text-2xl font-bold text-red-600"><%= c.price %></span>
                  </div>
                  <button class="w-full bg-red-600 text-white py-2 rounded-lg font-semibold hover:bg-red-700">Add +</button>
                </div>
              </div>
            <% }) %>
          </div>
        </section>

        <!-- üç® Desserts -->
        <section>
          <div class="flex items-center justify-between mb-6">
            <h2 class="text-3xl font-semibold text-red-700 mb-6 border-b-2 border-red-600 pb-2">Desserts </h2>
          <button class="bg-red-600 md:ml-77 text-white px-3 py-1.5 text-sm rounded-md  relative  font-semibold hover:bg-red-700 transition">Add + Item
</button>
          </div>
          

          <div class="flex gap-6 overflow-x-auto pb-4 snap-x snap-mandatory scrollbar-thin scrollbar-thumb-red-600">
            <% const desserts = [
              {name:"Hot Lava Cake", desc:"Rich chocolate lava inside", price:"‚Çπ80", img:"/images/lavaCake.png"},
              {name:"Brownie with Hot Chocolate Sauce", desc:"Warm and gooey brownie treat", price:"‚Çπ90", img:"/images/brownie.png"}
            ]; %>

            <% desserts.forEach(d => { %>
              <div class="flex-none snap-center w-[300px] h-[460px] bg-white rounded-xl 
                          border-t-4 border-red-600 
                          shadow-[0_4px_10px_rgba(0,0,0,0.2),0_0_0_4px_rgba(255,255,255,0.1)] 
                          hover:shadow-[0_6px_15px_rgba(0,0,0,0.3),0_0_0_4px_rgba(255,255,255,0.15)] 
                          flex flex-col transition-shadow duration-300">
                <div class="h-48">
                  <img src="<%= d.img %>" class="w-full h-full object-cover rounded-t-xl" />
                </div>
                <div class="p-4 flex-grow flex flex-col justify-between">
                  <div>
                    <h3 class="text-xl font-bold mb-1 text-red-600"><%= d.name %></h3>
                    <p class="text-sm text-gray-600 mb-3"><%= d.desc %></p>
                    <span class="text-2xl font-bold text-red-600"><%= d.price %></span>
                  </div>
                  <button class="w-full bg-red-600 text-white py-2 rounded-lg font-semibold hover:bg-red-700">Add +</button>
                </div>
              </div>
            <% }) %>
          </div>
        </section>

      </main>

      <!-- Mobile menu script -->
      <script>
        const btn = document.querySelector('button.mobile-menu-button');
        const menu = document.querySelector('.mobile-menu');
        if(btn && menu){
          btn.addEventListener('click', () => {
            menu.classList.toggle('hidden');
          });
        }
      </script>
    </body>
  </html>




  <!--for add google map in check out -->

  <!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Checkout - Royal Panda</title>
  <script src="https://cdn.tailwindcss.com"></script>
  <script src="https://maps.googleapis.com/maps/api/js?key=YOUR_API_KEY&libraries=places"></script>
</head>
<body class="bg-gray-50 min-h-screen font-sans">

  <div class="max-w-6xl mx-auto py-12 px-4">
    <h2 class="text-4xl font-extrabold text-center mb-12 text-red-600">Checkout</h2>

    <div class="grid lg:grid-cols-3 gap-10">

      <!-- LEFT SIDE: Address & Payment -->
      <form action="/checkout" method="POST" class="lg:col-span-2 bg-white p-8 rounded-3xl shadow-lg space-y-6">
        <h3 class="text-2xl font-semibold mb-4 border-b pb-2">Shipping Details</h3>

        <div class="grid md:grid-cols-2 gap-4">
          <div>
            <label class="block font-medium mb-1">Full Name</label>
            <input type="text" name="name" value="<%= user ? user.name : '' %>" required class="w-full border border-gray-300 px-4 py-2 rounded-lg focus:ring-2 focus:ring-red-500 focus:outline-none">
          </div>
          <div>
            <label class="block font-medium mb-1">Mobile</label>
            <input type="text" name="mobile" value="<%= user ? user.mobile : '' %>" required maxlength="10" class="w-full border border-gray-300 px-4 py-2 rounded-lg focus:ring-2 focus:ring-red-500 focus:outline-none">
          </div>
        </div>

        <!-- Map Picker -->
        <div>
          <label class="block font-medium mb-1">Select Address on Map</label>
          <div id="map" class="w-full h-64 rounded-lg mb-2"></div>
          <p class="text-gray-500 text-sm mb-2">Or edit the address manually below.</p>
          <textarea id="address" name="address" rows="3" required class="w-full border px-4 py-2 rounded-lg focus:ring-2 focus:ring-red-500 focus:outline-none"></textarea>
        </div>

        <div class="grid md:grid-cols-2 gap-4">
          <div>
            <label class="block font-medium mb-1">City</label>
            <input type="text" name="city" required class="w-full border border-gray-300 px-4 py-2 rounded-lg focus:ring-2 focus:ring-red-500 focus:outline-none">
          </div>
          <div>
            <label class="block font-medium mb-1">Pincode</label>
            <input type="text" name="pincode" maxlength="6" required class="w-full border border-gray-300 px-4 py-2 rounded-lg focus:ring-2 focus:ring-red-500 focus:outline-none">
          </div>
        </div>

        <div class="grid md:grid-cols-2 gap-4">
          <div>
            <label class="block font-medium mb-1">State</label>
            <input type="text" name="state" required class="w-full border border-gray-300 px-4 py-2 rounded-lg focus:ring-2 focus:ring-red-500 focus:outline-none">
          </div>
          <div>
            <label class="block font-medium mb-1">Country</label>
            <input type="text" name="country" value="India" required class="w-full border border-gray-300 px-4 py-2 rounded-lg focus:ring-2 focus:ring-red-500 focus:outline-none">
          </div>
        </div>

        <!-- Payment Method -->
        <h3 class="text-2xl font-semibold mt-6 mb-4 border-b pb-2">Payment Method</h3>
        <div class="space-y-2">
          <label class="flex items-center gap-3 cursor-pointer">
            <input type="radio" name="payment" value="COD" checked class="accent-red-600">
            <span>Cash on Delivery</span>
          </label>
          <label class="flex items-center gap-3 cursor-pointer">
            <input type="radio" name="payment" value="Online" class="accent-red-600" id="onlinePayment">
            <span>Online Payment (Razorpay)</span>
          </label>
        </div>

        <button type="submit" class="w-full bg-red-600 text-white py-3 rounded-xl font-semibold text-lg hover:bg-red-700 transition duration-300">
          Place Order
        </button>
      </form>

      <!-- RIGHT SIDE: Cart Summary -->
      <div class="bg-white p-6 rounded-3xl shadow-lg h-fit">
        <h3 class="text-2xl font-semibold mb-6 border-b pb-2">Order Summary</h3>

        <% if (cart && cart.length > 0) { %>
          <ul class="divide-y divide-gray-200 mb-4">
            <% cart.forEach(item => { %>
              <li class="py-3 flex justify-between items-center">
                <span class="font-medium"><%= item.name %> <span class="text-gray-500">(x<%= item.qty %>)</span></span>
                <span class="font-semibold">‚Çπ<%= item.price * item.qty %></span>
              </li>
            <% }) %>
          </ul>
          <div class="space-y-2 border-t pt-4">
            <div class="flex justify-between text-gray-600">
              <span>Subtotal</span>
              <span>‚Çπ<%= subtotal %></span>
            </div>
            <div class="flex justify-between text-gray-600">
              <span>Delivery Fee</span>
              <span>‚Çπ<%= deliveryFee %></span>
            </div>
            <div class="flex justify-between font-bold text-lg">
              <span>Total</span>
              <span>‚Çπ<%= total %></span>
            </div>
          </div>
        <% } else { %>
          <p class="text-gray-500">Your cart is empty.</p>
        <% } %>
      </div>

    </div>
  </div>

  <!-- Online Payment Modal -->
  <div id="paymentModal" class="fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center hidden">
    <div class="bg-white p-6 rounded-xl shadow-lg w-96 relative">
      <button id="closeModal" class="absolute top-2 right-2 text-gray-500 hover:text-gray-700">&times;</button>
      <h3 class="text-xl font-semibold mb-2">Notice</h3>
      <p class="text-gray-700">Online payment will be available soon.</p>
      <button id="modalOk" class="mt-4 w-full bg-red-600 text-white py-2 rounded-lg hover:bg-red-700 transition">OK</button>
    </div>
  </div>

  <script>
    // Online Payment Modal
    const onlineRadio = document.getElementById('onlinePayment');
    const modal = document.getElementById('paymentModal');
    const closeModal = document.getElementById('closeModal');
    const modalOk = document.getElementById('modalOk');

    onlineRadio.addEventListener('click', () => {
      modal.classList.remove('hidden');
    });

    closeModal.addEventListener('click', () => {
      modal.classList.add('hidden');
      onlineRadio.checked = false;
    });
    modalOk.addEventListener('click', () => {
      modal.classList.add('hidden');
      onlineRadio.checked = false;
    });
    window.addEventListener('click', (e) => {
      if (e.target === modal) {
        modal.classList.add('hidden');
        onlineRadio.checked = false;
      }
    });

    // Google Maps
    let map, marker;
    function initMap() {
      const defaultLoc = { lat: 28.6139, lng: 77.209 }; // Default: Delhi
      map = new google.maps.Map(document.getElementById("map"), {
        center: defaultLoc,
        zoom: 12,
      });

      marker = new google.maps.Marker({
        position: defaultLoc,
        map: map,
        draggable: true,
      });

      const geocoder = new google.maps.Geocoder();

      // Update address on marker drag
      marker.addListener("dragend", () => {
        const pos = marker.getPosition();
        geocoder.geocode({ location: pos }, (results, status) => {
          if (status === "OK" && results[0]) {
            document.getElementById("address").value = results[0].formatted_address;
          }
        });
      });

      // Update marker on map click
      map.addListener("click", (e) => {
        marker.setPosition(e.latLng);
        geocoder.geocode({ location: e.latLng }, (results, status) => {
          if (status === "OK" && results[0]) {
            document.getElementById("address").value = results[0].formatted_address;
          }
        });
      });
    }

    window.initMap = initMap;
    window.onload = initMap;
  </script>

</body>
</html>






<!-- cartcontroller -->

 console.error("Cart sync error:", err);
    res.status(500).json({ success: false, error: err.message });
  }
};

// ====================== CHECKOUT PAGE ======================
exports.getCheckout = (req, res) => {
  if (!req.session.isLoggedIn) return res.redirect("/login");

  const cart = req.session.cart || [];
  const subtotal = cart.reduce((sum, i) => sum + i.price * i.qty, 0);
  const deliveryFee = subtotal > 500 ? 0 : 50;
  const total = subtotal + deliveryFee;

  res.render("checkout", {
    user: req.session.user,
    cart,
    subtotal,
    deliveryFee,
    total
  });
};

// ====================== POST CHECKOUT ======================

// exports.postCheckout = async (req, res) => {
//   if (!req.session.isLoggedIn) return res.redirect("/login");

//   const { name, mobile, address, city, pincode, state, country, payment } = req.body;
//   const cart = req.session.cart || [];

//   // Handle empty cart
//   if (!cart.length) {
//     return res.render("checkout", {
//       user: req.session.user,
//       cart,
//       subtotal: 0,
//       deliveryFee: 0,
//       total: 0,
//       errors: ["Your cart is empty."]
//     });
//   }

//   // Validate required shipping details
//   if (!name || !mobile || !address || !city || !pincode || !state || !country) {
//     return res.render("checkout", {
//       user: req.session.user,
//       cart,
//       subtotal: 0,
//       deliveryFee: 0,
//       total: 0,
//       errors: ["Please fill in all required address fields."]
//     });
//   }

//   const subtotal = cart.reduce((sum, i) => sum + i.price * i.qty, 0);
//   const deliveryFee = subtotal > 500 ? 0 : 50;
//   const total = subtotal + deliveryFee;

//   try {
//     // Save order to DB
//     const order = new Order({
//       userId: req.session.user._id || null,
//    const Dish = require("../model/dish");
const Cart = require("../model/cart");
const Order = require("../model/order");

// ====================== FETCH SINGLE DISH ======================
exports.getDishById = async (req, res) => {
  try {
    const dish = await Dish.findById(req.params.id);
    if (!dish) return res.status(404).json({ error: "Dish not found" });
    res.json(dish);
  } catch (err) {
    res.status(500).json({ error: err.message });
  }
};

// ====================== ORDER PAGE ======================
exports.Order = async (req, res) => {
  try {
    const dishes = await Dish.find();
    let cartCount = 0;

    if (req.session.user) {
      const userCart = await Cart.findOne({ userId: req.session.user._id });
      if (userCart && userCart.items.length > 0) {
        cartCount = userCart.items.reduce((acc, item) => acc + item.qty, 0);
      }
    } else if (req.session.cart) {
      cartCount = req.session.cart.reduce((acc, item) => acc + (item.qty || 1), 0);
    }

    res.render("order", { dishes, cartCount });
  } catch (err) {
    console.error(err);
    res.status(500).send("Internal Server Error");
  }
};

// ====================== CART PAGE ======================
exports.renderCartPage = async (req, res) => {
  try {
    let cartItems = [];
    let cartCount = 0;

    if (req.session.user) {
      // Fetch cart from DB
      const userCart = await Cart.findOne({ userId: req.session.user._id });

      if (userCart && userCart.items.length > 0) {
        const dishIds = userCart.items.map((item) => item.dishId);
        const dishes = await Dish.find({ _id: { $in: dishIds } });

        cartItems = userCart.items.map((item) => {
          const dish = dishes.find((d) => d._id.toString() === item.dishId.toString());
          return {
            ...item.toObject(),
            dishName: dish?.name || "Unknown Dish",
            price: dish?.price || 0,
            image: dish?.image || "/images/default-dish.png",
          };
        });

        cartCount = cartItems.reduce((acc, item) => acc + item.qty, 0);
        req.session.cart = cartItems; // ‚úÖ Keep session cart in sync
      }
    } else if (req.session.cart) {
      // Guest cart
      cartItems = req.session.cart;
      cartCount = cartItems.reduce((acc, item) => acc + (item.qty || 1), 0);
    }

    res.render("cart", { cartItems, cartCount });
  } catch (err) {
    console.error("Error loading cart page:", err);
    res.status(500).send("Error loading cart page");
  }
};

// ====================== LOGIN CHECK ======================
exports.checkLogin = (req, res) => {
  res.json({ isLoggedIn: req.session.isLoggedIn === true });
};

// ====================== SYNC CART ======================
exports.syncCart = async (req, res) => {
  try {
    if (!req.session.isLoggedIn) {
      return res.status(401).json({ success: false, message: "Not logged in" });
    }

    const userId = req.session.user._id;
    const { cart } = req.body;

    // Update DB cart
    await Cart.findOneAndUpdate(
      { userId },
      { items: cart, updatedAt: new Date() },
      { upsert: true }
    );

    // ‚úÖ Update session cart immediately
    req.session.cart = cart;

    res.json({ success: true });
  } catch (err) {
      userName: name,
//       mobile,
//       address,
//       city,
//       pincode,
//       state,
//       country,
//       paymentMethod: payment,
//       items: cart.map(item => ({
//         name: item.name,
//         qty: item.qty,
//         price: item.price
//       })),
//       total,
//       status: "Pending",
//     });

//     await order.save();

//     // Clear cart
//     req.session.cart = [];

//     // Render success page
//     res.render("order-success", { order, user: req.session.user });
//   } catch (err) {
//     console.error("Checkout failed:", err);
//     res.status(500).send("Checkout failed");
//   }
// };


exports.postCheckout = async (req, res) => {
  if (!req.session.isLoggedIn) return res.redirect("/login");

  const { name, mobile, address, city, pincode, state, country, payment } = req.body;
  const cart = req.session.cart || [];

  if (!cart.length) {
    return res.render("checkout", {
      user: req.session.user,
      cart,
      subtotal: 0,
      deliveryFee: 0,
      total: 0,
      errors: ["Your cart is empty."]
    });
  }

  if (!name || !mobile || !address || !city || !pincode || !state || !country) {
    return res.render("checkout", {
      user: req.session.user,
      cart,
      subtotal: 0,
      deliveryFee: 0,
      total: 0,
      errors: ["Please fill in all required address fields."]
    });
  }

  const subtotal = cart.reduce((sum, i) => sum + i.price * i.qty, 0);
  const deliveryFee = subtotal > 500 ? 0 : 50;
  const total = subtotal + deliveryFee;

  try {
    const order = new Order({
      userId: req.session.user._id,
      userName: name,
      mobile,
      address: {
        street: address,
        city,
        state,
        country,
        pincode
      },
      paymentMethod: payment,
      items: cart.map(item => ({
        name: item.name,
        qty: item.qty,
        price: item.price
      })),
      total,
      status: "Pending"
    });

    await order.save();
    req.session.cart = [];

    // res.render("order-success", { order, user: req.session.user });
    res.render("waiting", { order, user: req.session.user });
  } catch (err) {
    console.error("Checkout failed:", err);
    res.status(500).send("Checkout failed: " + err.message);
  }
};

<!-- cart -->

<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Your Cart - Royal Panda</title>
  <script src="https://cdn.tailwindcss.com"></script>
</head>
<body class="bg-gray-50 text-gray-900">
  <%- include('partials/nav', { cartCount: typeof cartCount !== 'undefined' ? cartCount : 0 }) %>

  <main class="p-6 max-w-3xl mx-auto">
    <h1 class="text-3xl font-bold text-red-700 mb-6">Your Cart</h1>

    <!-- Alert message -->
    <div id="loginAlert" class="hidden p-4 mb-4 text-red-700 bg-red-100 border border-red-400 rounded-lg text-center"></div>

    <!-- Cart items container -->
    <div id="cartItems" class="space-y-4"></div>

    <!-- Cart summary -->
    <div id="cartSummary" class="mt-6 p-4 bg-white shadow-md rounded-xl text-right hidden">
      <p class="text-xl font-semibold mb-2">Total: ‚Çπ<span id="totalAmount">0</span></p>
      <button id="checkoutBtn" class="bg-red-600 text-white px-6 py-2 rounded-md font-semibold hover:bg-red-700">
        Checkout
      </button>
    </div>
  </main>

  <script>
    const loginAlert = document.getElementById("loginAlert");

    // Load cart items from localStorage
    function loadCart() {
      const cart = JSON.parse(localStorage.getItem("cart")) || [];
      const container = document.getElementById("cartItems");
      const summary = document.getElementById("cartSummary");
      const totalEl = document.getElementById("totalAmount");

      if (!cart.length) {
        container.innerHTML = `<p class="text-gray-600 text-center text-lg">Your cart is empty.</p>`;
        summary.classList.add('hidden');
        return;
      }

      let total = 0;
      container.innerHTML = cart.map((item, idx) => {
        const subtotal = item.price * item.qty;
        total += subtotal;
        return `
          <div class="bg-white p-4 shadow-sm rounded-lg flex gap-4 items-center">
            <img src="/${item.photo.replace(/\\/g, "/")}" class="w-20 h-20 object-cover rounded-lg" />
            <div class="flex-1">
              <h3 class="font-semibold text-lg text-red-600">${item.name}</h3>
              ${item.size ? `<p class="text-sm text-gray-600">Size: ${item.size}</p>` : ''}
              <p class="text-sm text-gray-800">Price: ‚Çπ${item.price} √ó ${item.qty}</p>
            </div>
            <div class="flex flex-col items-center">
              <button onclick="changeQty(${idx}, 1)" class="bg-gray-200 rounded-full w-6 h-6 text-center">+</button>
              <span>${item.qty}</span>
              <button onclick="changeQty(${idx}, -1)" class="bg-gray-200 rounded-full w-6 h-6 text-center">‚àí</button>
            </div>
          </div>
        `;
      }).join('');

      totalEl.textContent = total;
      summary.classList.remove('hidden');
    }

    // Change quantity
    function changeQty(index, delta) {
      let cart = JSON.parse(localStorage.getItem("cart")) || [];
      if (!cart[index]) return;
      cart[index].qty += delta;
      if (cart[index].qty <= 0) cart.splice(index, 1);
      localStorage.setItem("cart", JSON.stringify(cart));
      loadCart();
    }

    // Checkout logic
    document.getElementById("checkoutBtn").addEventListener("click", async () => {
      const cart = JSON.parse(localStorage.getItem("cart")) || [];
      if (!cart.length) return alert("Cart is empty.");

      try {
        const res = await fetch("/api/check-login");
        const { isLoggedIn } = await res.json();

        if (!isLoggedIn) {
          window.location.href = "/login";
          return;
        }

        const sync = await fetch("/api/cart/sync", {
          method: "POST",
          headers: { "Content-Type": "application/json" },
          body: JSON.stringify({ cart })
        });

        const result = await sync.json();
        if (result.success) {
          alert("‚úÖ Cart synced successfully. Redirecting to checkout...");
          localStorage.removeItem("cart");
          window.location.href = "/checkout";
        } else {
          loginAlert.textContent = "‚ùå Something went wrong while syncing the cart.";
          loginAlert.classList.remove("hidden");
        }
      } catch (err) {
        loginAlert.textContent = "‚ö†Ô∏è Something went wrong. Please check your connection.";
        loginAlert.classList.remove("hidden");
      }
    });

    loadCart();
  </script>
</body>
</html>




















<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Royal Panda</title>
    <link rel="shortcut icon" href="/images/favicon.ico" type="image/x-icon" />
    <script src="https://cdn.tailwindcss.com"></script>
  </head>

  <body class="bg-gray-50 text-gray-900">
    <!-- Navbar -->
    <%- include('./partials/nav') %>

    <main class="p-6 relative">
      <% 
        const grouped = {};
        dishes.forEach(dish => {
          const category = dish.category.toLowerCase();
          if (!grouped[category]) grouped[category] = [];
          grouped[category].push(dish);
        });

        const displayNames = {
          pizza: 'Pizza',
          burger: 'Burger',
          'garlic bread': 'Garlic Bread',
          pasta: 'Pasta',
          fries: 'Fries',
          sandwich: 'Sandwich',
          wraps: 'Wraps',
          shakes: 'Shakes',
          coffee: 'Coffee',
          desserts: 'Desserts'
        };

        const displayOrder = Object.keys(displayNames);
        const orderedCategories = [
          ...displayOrder.filter(cat => grouped[cat]),
          ...Object.keys(grouped).filter(cat => !displayOrder.includes(cat))
        ];
      %>

      <% orderedCategories.forEach(cat => { %>
        <section class="mb-10">
          <h2 class="text-3xl font-semibold text-red-700 mb-4 border-b-2 border-red-600 pb-2">
            <%= displayNames[cat] || cat.charAt(0).toUpperCase() + cat.slice(1) %>
          </h2>

          <div class="flex gap-4 overflow-x-auto pb-3 snap-x snap-mandatory scrollbar-thin scrollbar-thumb-red-600">
            <% grouped[cat].forEach((dish) => { %>
              <div class="flex-none snap-center w-[280px] min-h-[300px]
                          bg-white rounded-xl 
                          border-t-4 border-red-600 
                          shadow-[0_4px_10px_rgba(0,0,0,0.2)] 
                          hover:shadow-[0_6px_15px_rgba(0,0,0,0.3)] 
                          flex flex-col transition-shadow duration-300 dish-card">
                
                <!-- Dish Image -->
                <div class="h-44">
                  <img src="/<%= dish.photo.replace(/\\/g, "/") %>" 
                       alt="<%= dish.name %>" 
                       class="w-full h-full object-cover rounded-t-xl" />
                </div>

                <!-- Dish Info -->
                <div class="p-3 flex flex-col flex-grow justify-between">
                  <div>
                    <h3 class="text-xl font-bold mb-1 text-red-600"><%= dish.name %></h3>
                    <p class="text-sm text-gray-600 mb-2 min-h-[40px]"><%= dish.desc %></p>
                  </div>

                  <!-- Price and Actions -->
                  <div>
                    <% if (dish.priceType === 'half-full') { %>
                      <div class="flex flex-col gap-2">
                        <form action="/cart/add" method="POST">
                          <input type="hidden" name="dishId" value="<%= dish._id %>">
                          <input type="hidden" name="size" value="Half">
                          <button type="submit"
                            class="w-full flex justify-between items-center bg-red-600 text-white py-2 px-4 rounded-lg font-semibold hover:bg-red-700 transition shadow-md hover:shadow-lg">
    
                            <div class="flex flex-col items-start leading-tight">
                              <span class="text-base font-semibold tracking-wide">Half</span>
                              <span class="text-[11px] font-medium opacity-80">Add to cart</span>
                            </div>

                            <span class="text-lg font-bold bg-white text-red-600 px-3 py-[2px] rounded-md shadow-sm">
                              ‚Çπ<%= dish.halfPrice || 0 %>
                            </span>
                          </button>
                        </form>

                        <form action="/cart/add" method="POST">
                          <input type="hidden" name="dishId" value="<%= dish._id %>">
                          <input type="hidden" name="size" value="Full">
                          <button type="submit"
                            class="w-full flex justify-between items-center bg-red-600 text-white py-2 px-4 rounded-lg font-semibold hover:bg-red-700 transition shadow-md hover:shadow-lg">

                            <div class="flex flex-col items-start leading-tight">
                              <span class="text-base font-semibold tracking-wide">Full</span>
                              <span class="text-[11px] font-medium opacity-80">Add to cart</span>
                            </div>

                            <span class="text-lg font-bold bg-white text-red-600 px-3 py-[2px] rounded-md shadow-sm">
                              ‚Çπ<%= dish.fullPrice || 0 %>
                            </span>
                          </button>
                        </form>
                      </div>
                    <% } else { %>
                      <!-- General Price Option with Add -> Qty -->
                      <span class="text-2xl font-bold text-red-600">
                        ‚Çπ<%= dish.generalPrice ?? dish.price ?? 0 %>
                      </span>
                      <div class="mt-2">
                        <form action="/cart/add" method="POST" class="w-full add-form" data-dish-id="<%= dish._id %>" data-photo="/<%= dish.photo.replace(/\\/g, "/") %>">
                          <input type="hidden" name="dishId" value="<%= dish._id %>" />
                          <button
                            type="submit"
                            class="w-full bg-red-600 text-white py-2 rounded-lg font-semibold hover:bg-red-700 transition add-btn"
                          >
                            Add +
                          </button>
                        </form>

                        <!-- Qty controls hidden initially -->
                        <div class="flex items-center py-2 justify-center rounded-lg bg-red-600 gap-2 mt-1 qty-controls hidden" id="qty-controls-<%= dish._id %>">
                          <button type="button" class="qty-btn px-2 py-1 bg-gray-200 rounded" data-action="minus">-</button>
                          <span class="qty" id="qty-<%= dish._id %>">1</span>
                          <button type="button" class="qty-btn px-2 py-1 bg-gray-200 rounded" data-action="plus">+</button>
                        </div>
                      </div>
                    <% } %>
                    <% if (user && user.role === 'admin') { %>
                    <form action="/host/delete-dish/<%= dish._id %>" method="POST" class="mt-2 delete-dish-form" data-dish-id="<%= dish._id %>">
                      <button 
                        type="submit"
                        class="delete-btn w-full bg-gray-300 text-gray-800 py-2 rounded-lg font-semibold hover:bg-gray-400 transition">
                        Delete
                      </button>
                    </form>
                    <% } %>
                  </div>
                </div>
              </div>
            <% }) %>
          </div>
        </section>
      <% }) %>
    </main>

    <!-- Topping Modal ... (unchanged) -->
    <div id="toppingModal" class="fixed inset-0 bg-black/40 hidden items-center justify-center z-50 px-4">
      <div class="bg-white rounded-2xl shadow-xl p-6 w-full max-w-[360px] text-center border-t-4 border-red-600">
        <h2 id="modalTitle" class="text-2xl font-bold text-red-600 mb-4">Choose Toppings</h2>
        <form id="toppingForm" action="/choose-topping" method="POST" class="space-y-3">
          <input type="hidden" name="dishId" id="dishId" />
          <div id="toppingOptions"></div>
          <p id="toppingError" class="text-sm text-red-600 mt-1 min-h-[1.25rem]"></p>
          <div class="flex gap-2 mt-4">
            <button type="submit" class="flex-1 bg-red-600 text-white py-2 rounded-lg font-semibold hover:bg-red-700 transition">
              Confirm
            </button>
            <button type="button" onclick="closeToppingModal()" class="flex-1 bg-gray-300 text-gray-800 py-2 rounded-lg font-semibold hover:bg-gray-400 transition">
              Cancel
            </button>
          </div>
        </form>
      </div>
    </div>

    <!-- ===================== Scripts ===================== -->
    <script>
      const btn = document.querySelector('button.mobile-menu-button');
      const menu = document.querySelector('.mobile-menu');
      if (btn && menu) btn.addEventListener('click', () => menu.classList.toggle('hidden'));

      let currentRequiredCount = 1;
      const toppingsList = ['Onion','Capsicum','Corn','Tomato'];

      function openToppingModal(dishId, requiredCount) {
        currentRequiredCount = Number(requiredCount) || 1;
        document.getElementById('dishId').value = dishId;
        const options = document.getElementById('toppingOptions');
        const title = document.getElementById('modalTitle');
        const errorEl = document.getElementById('toppingError');
        errorEl.textContent = '';

        title.textContent = currentRequiredCount === 1
          ? 'Choose 1 Topping'
          : `Choose ${currentRequiredCount} Toppings`;

        let html = '';
        if (currentRequiredCount === 1) {
          toppingsList.forEach((t, i) => {
            html += `<label class="block bg-gray-100 hover:bg-red-100 py-2 rounded-lg cursor-pointer">
              <input type="radio" name="topping" value="${t}" class="mr-2 accent-red-600" ${i===0?'required':''} /> ${t}
            </label>`;
          });
        } else {
          toppingsList.forEach(t => {
            html += `<label class="block bg-gray-100 hover:bg-red-100 py-2 rounded-lg cursor-pointer">
              <input type="checkbox" name="toppings[]" value="${t}" class="mr-2 accent-red-600 topping-checkbox" /> ${t}
            </label>`;
          });
        }
        options.innerHTML = html;

        if (currentRequiredCount > 1) {
          const boxes = options.querySelectorAll('input[type="checkbox"].topping-checkbox');
          boxes.forEach(box => box.addEventListener('change', () => {
            const checkedCount = options.querySelectorAll('input[type="checkbox"].topping-checkbox:checked').length;
            boxes.forEach(b => b.disabled = !b.checked && checkedCount >= currentRequiredCount);
            errorEl.textContent = '';
          }));
        }

        const modal = document.getElementById('toppingModal');
        modal.classList.remove('hidden'); modal.classList.add('flex');
      }

      function closeToppingModal() {
        const modal = document.getElementById('toppingModal');
        document.getElementById('toppingOptions').innerHTML = '';
        document.getElementById('toppingError').textContent = '';
        document.getElementById('dishId').value = '';
        modal.classList.add('hidden'); modal.classList.remove('flex');
      }

      document.getElementById('toppingForm').addEventListener('submit', function(e) {
        const errorEl = document.getElementById('toppingError'); errorEl.textContent = '';
        if (currentRequiredCount === 1) {
          if (!document.querySelector('input[name="topping"]:checked')) {
            e.preventDefault(); errorEl.textContent = 'Please select 1 topping.'; return false;
          }
        } else {
          const checked = document.querySelectorAll('input[name="toppings[]"]:checked').length;
          if (checked !== currentRequiredCount) {
            e.preventDefault(); errorEl.textContent = `Please select exactly ${currentRequiredCount} toppings.`; return false;
          }
        }
      });

      function updateCartCount() {
        const cart = JSON.parse(localStorage.getItem("cart")) || [];
        const count = cart.reduce((acc, item) => acc + item.qty, 0);
        const span = document.getElementById("cartCount");
        if(span) span.textContent = count;
      }

      // =================== Cart Handling for all dishes ===================
      document.querySelectorAll('form[action="/cart/add"]').forEach(form => {
        form.addEventListener('submit', async e => {
          e.preventDefault();
          const dishId = form.querySelector('input[name="dishId"]').value;
          const size = form.querySelector('input[name="size"]')?.value || null;
          const res = await fetch(`/api/dishes/${dishId}`);
          const dish = await res.json();

          let cart = JSON.parse(localStorage.getItem("cart")) || [];
          const existing = cart.find(item => item.dishId === dishId && item.size === size);
          let price = 0;

          if (dish.priceType === 'half-full') {
            price = size === 'Half' ? dish.halfPrice : dish.fullPrice;
          } else {
            price = dish.generalPrice ?? dish.price ?? 0;
          }

          if (existing) existing.qty += 1;
          else cart.push({ dishId, name: dish.name, price, size, qty: 1, photo: dish.photo });

          localStorage.setItem("cart", JSON.stringify(cart));
          updateCartCount();
        });
      });

      updateCartCount();

      document.querySelectorAll('.delete-dish-form').forEach(form => {
        form.addEventListener('submit', async (e) => {
          e.preventDefault();
          const confirmed = confirm('Are you sure you want to delete this dish?');
          if (!confirmed) return;

          const btn = form.querySelector('.delete-btn');
          btn.textContent = 'Deleting...';
          btn.disabled = true;

          const dishId = form.dataset.dishId;
          const card = form.closest('.dish-card');
          card.classList.add('opacity-0', 'scale-90', 'transition', 'duration-500');

          setTimeout(async () => {
            try {
              const res = await fetch(`/host/delete-dish/${dishId}`, { method: 'POST' });
              if (res.ok) card.remove();
              else {
                alert('Failed to delete dish.');
                btn.textContent = 'Delete';
                btn.disabled = false;
                card.classList.remove('opacity-0', 'scale-90');
              }
            } catch {
              alert('Error deleting dish.');
              btn.textContent = 'Delete';
              btn.disabled = false;
              card.classList.remove('opacity-0', 'scale-90');
            }
          }, 400);
        });
      });

      // =================== General Dishes: Add ‚Üí Qty toggle ===================
      document.querySelectorAll('.dish-card').forEach(card => {
        const addForm = card.querySelector('form.add-form');
        if (!addForm) return;

        const dishId = addForm.dataset.dishId;
        const qtyControls = document.getElementById(`qty-controls-${dishId}`);
        const qtySpan = qtyControls.querySelector('.qty');

        // Add button click
        addForm.addEventListener('submit', e => {
          e.preventDefault();

          let cart = JSON.parse(localStorage.getItem("cart")) || [];
          let existing = cart.find(item => item.dishId === dishId && !item.size);

          let price = parseInt(card.querySelector('span.text-2xl').textContent.replace('‚Çπ',''),10);
          // Prefer data-photo on the form; fallback to card image src
          const photo = addForm.dataset.photo || card.querySelector('img')?.getAttribute('src') || '';

          if (existing) existing.qty += 1;
          else cart.push({ dishId, name: card.querySelector('h3').textContent, price, size: null, qty: 1, photo });

          localStorage.setItem("cart", JSON.stringify(cart));
          updateCartCount();

          addForm.style.display = 'none';
          qtyControls.classList.remove('hidden');
          qtySpan.textContent = existing ? existing.qty : 1;
        });

        // +/- buttons
        qtyControls.querySelectorAll('.qty-btn').forEach(btn => {
          btn.addEventListener('click', () => {
            let cart = JSON.parse(localStorage.getItem("cart")) || [];
            const item = cart.find(i => i.dishId === dishId && !i.size);
            if (!item) return;

            if (btn.dataset.action === 'plus') item.qty += 1;
            if (btn.dataset.action === 'minus') item.qty -= 1;

            if (item.qty < 1) {
              cart = cart.filter(i => i.dishId !== dishId || i.size);
              qtyControls.classList.add('hidden');
              addForm.style.display = 'block';
            } else {
              qtySpan.textContent = item.qty;
            }

            localStorage.setItem("cart", JSON.stringify(cart));
            updateCartCount();
          });
        });
      });
    </script>
  </body>
</html>
